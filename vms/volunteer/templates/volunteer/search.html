{% extends "vms/base.html" %}

{% load i18n %}

{% block content %}
    <div class="spacer"></div>
    <div class="well">
        <form class="form-horizontal" action="{% url 'volunteer:search' %}" method="post">
            {% csrf_token %}
            <fieldset>
                <legend class="header">{% trans "Search Volunteers" %}</legend>
                {% if form.first_name.errors %}
                    <div class="form-group has-error">
                        <label class="col-md-2 control-label">{% trans "First Name" %}</label>
                        <div class="col-md-8">
                            <input class="form-control" placeholder="{% blocktrans %}Search by First Name{% endblocktrans %}" type="text" name="first_name" value="{% if form.first_name.value %}{{ form.first_name.value }}{% endif %}">
                            <p class="help-block">
                                <strong>
                                    {% for error in form.first_name.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </strong>
                            </p>
                        </div>
                    </div>
                {% else %}
                    <div class="form-group">
                        <label class="col-md-2 control-label">{% trans "First Name" %}</label>
                        <div class="col-md-8">
                            <input class="form-control" placeholder="{% blocktrans %}Search by First Name{% endblocktrans %}" type="text" name="first_name" value="{% if form.first_name.value %}{{ form.first_name.value }}{% endif %}">
                        </div>
                    </div>
                {% endif %}
                {% if form.last_name.errors %}
                    <div class="form-group has-error">
                        <label class="col-md-2 control-label">{% trans "Last Name" %}</label>
                        <div class="col-md-8">
                            <input class="form-control" placeholder="{% blocktrans %}Search by Last Name{% endblocktrans %}" type="text" name="last_name" value="{% if form.last_name.value %}{{ form.last_name.value }}{% endif %}">
                            <p class="help-block">
                                <strong>
                                    {% for error in form.last_name.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </strong>
                            </p>
                        </div>
                    </div>
                {% else %}
                    <div class="form-group">
                        <label class="col-md-2 control-label">{% trans "Last Name" %}</label>
                        <div class="col-md-8">
                            <input class="form-control" placeholder="{% blocktrans %}Search by Last Name{% endblocktrans %}" type="text" name="last_name" value="{% if form.last_name.value %}{{ form.last_name.value }}{% endif %}">
                        </div>
                    </div>
                {% endif %}
                {% if form.city.errors %}
                    <div class="form-group has-error">
                        <label class="col-md-2 control-label">{% trans "City" %}</label>
                        <div class="col-md-8">
                            <input class="form-control" placeholder="{% blocktrans %}Search by City{% endblocktrans %}" type="text" name="city" value="{% if form.city.value %}{{ form.city.value }}{% endif %}">
                            <p class="help-block">
                                <strong>
                                    {% for error in form.city.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </strong>
                            </p>
                        </div>
                    </div>
                {% else %}
                    <div class="form-group">
                        <label class="col-md-2 control-label">{% trans "City" %}</label>
                        <div class="col-md-8">
                            <input class="form-control" placeholder="{% blocktrans %}Search by City{% endblocktrans %}" type="text" name="city" value="{% if form.city.value %}{{ form.city.value }}{% endif %}">
                        </div>
                    </div>
                {% endif %}
                {% if form.state.errors %}
                    <div class="form-group has-error">
                        <label class="col-md-2 control-label">{% trans "State/Province" %}</label>
                        <div class="col-md-8">
                            <input class="form-control" placeholder="{% blocktrans %}Search by State/Province{% endblocktrans %}" type="text" name="state" value="{% if form.state.value %}{{ form.state.value }}{% endif %}">
                            <p class="help-block">
                                <strong>
                                    {% for error in form.state.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </strong>
                            </p>
                        </div>
                    </div>
                {% else %}
                    <div class="form-group">
                        <label class="col-md-2 control-label">{% trans "State/Province" %}</label>
                        <div class="col-md-8">
                            <input class="form-control" placeholder="{% blocktrans %}Search by State/Province{% endblocktrans %}" type="text" name="state" value="{% if form.state.value %}{{ form.state.value }}{% endif %}">
                        </div>
                    </div>
                {% endif %}
                {% if form.country.errors %}
                    <div class="form-group has-error">
                        <label class="col-md-2 control-label">{% trans "Country" %}</label>
                        <div class="col-md-8">
                            <input class="form-control" placeholder="{% blocktrans %}Search by Country{% endblocktrans %}" type="text" name="country" value="{% if form.country.value %}{{ form.country.value }}{% endif %}">
                            <p class="help-block">
                                <strong>
                                    {% for error in form.country.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </strong>
                            </p>
                        </div>
                    </div>
                {% else %}
                    <div class="form-group">
                        <label class="col-md-2 control-label">{% trans "Country" %}</label>
                        <div class="col-md-8">
                            <input class="form-control" placeholder="{% blocktrans %}Search by Country{% endblocktrans %}" type="text" name="country" value="{% if form.country.value %}{{ form.country.value }}{% endif %}">
                        </div>
                    </div>
                {% endif %}
                {% if form.organization.errors %}
                    <div class="form-group has-error">
                        <label class="col-md-2 control-label">{% trans "Organization" %}</label>
                        <div class="col-md-8">
                            <input class="form-control" placeholder="{% blocktrans %}Search by Organization{% endblocktrans %}" type="text" name="organization" value="{% if form.organization.value %}{{ form.organization.value }}{% endif %}">
                            <p class="help-block">
                                <strong>
                                    {% for error in form.organization.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </strong>
                            </p>
                        </div>
                    </div>
                {% else %}
                    <div class="form-group">
                        <label class="col-md-2 control-label">{% trans "Organization" %}</label>
                        <div class="col-md-8">
                            <select id="select" class="form-control" name="organization">
								<option value="">-- {% trans "Select Organization" %} --</option>
								{% for organization in organizations_list %}
								<option value="{{ organization.name }}" {% if selected_organization == organization.name %}selected{% endif %}>{{ organization.name }}</option>
								{% endfor %}
							</select>
                        </div>
                    </div>
                {% endif %}
                {% if form.event.errors %}
                    <div class="form-group has-error">
                        <label class="col-md-2 control-label">{% trans "Event" %}</label>
                        <div class="col-md-8">
                            <input class="form-control" placeholder="{% blocktrans %}Search by Event{% endblocktrans %}" type="text" name="event" value="{% if form.event.value %}{{ form.event.value }}{% endif %}">
                            <p class="help-block">
                                <strong>
                                    {% for error in form.event.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </strong>
                            </p>
                        </div>
                    </div>
                {% else %}
                    <div class="form-group">
                        <label class="col-md-2 control-label">{% trans "Event" %}</label>
                        <div class="col-md-8">
                            <input class="form-control" placeholder="{% blocktrans %}Search by Event{% endblocktrans %}" type="text" name="event" value="{% if form.event.value %}{{ form.event.value }}{% endif %}">
                        </div>
                    </div>
                {% endif %}
                {% if form.job.errors %}
                    <div class="form-group has-error">
                        <label class="col-md-2 control-label">{% trans "Job" %}</label>
                        <div class="col-md-8">
                            <input class="form-control" placeholder="{% blocktrans %}Search by Job{% endblocktrans %}" type="text" name="job" value="{% if form.job.value %}{{ form.job.value }}{% endif %}">
                            <p class="help-block">
                                <strong>
                                    {% for error in form.job.errors %}
                                        {{ error }}
                                    {% endfor %}
                                </strong>
                            </p>
                        </div>
                    </div>
                {% else %}
                    <div class="form-group">
                        <label class="col-md-2 control-label">{% trans "Job" %}</label>
                        <div class="col-md-8">
                            <input class="form-control" placeholder="{% blocktrans %}Search by Job{% endblocktrans %}" type="text" name="job" value="{% if form.job.value %}{{ form.job.value }}{% endif %}">
                        </div>
                    </div>
                {% endif %}
            </fieldset>
            <div class="form-group">
                <div class="col-md-12 col-md-offset-2">
                    <button class="btn btn-primary" type="submit">{% trans "Search" %}</button>
                </div>
            </div>
        </form>
    </div>
    {% if search_result_list %}
        <div class="well">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>{% trans "First Name" %}</th>
                        <th>{% trans "Last Name" %}</th>
                        <th>{% trans "Address" %}</th>
                        <th>{% trans "City" %}</th>
                        <th>{% trans "State/Province" %}</th>
                        <th>{% trans "Country" %}</th>
                        <th>{% trans "Organization" %}</th>
                        <th>{% trans "Phone Number" %}</th>
                        <th>{% trans "Email" %}</th>
                        <th>{% trans "Reports" %}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for volunteer in search_result_list %}
                        <tr>
                            <td>{{ volunteer.first_name }}</td>
                            <td>{{ volunteer.last_name }}</td>
                            <td>{{ volunteer.address }}</td>
                            <td>{{ volunteer.city }}</td>
                            <td>{{ volunteer.state }}</td>
                            <td>{{ volunteer.country }}</td>
                            <td>{{ volunteer.organization.name }}</td>
                            <td>{{ volunteer.phone_number }}</td>
                            <td>{{ volunteer.email }}</td>
                            <td><a href="{% url 'volunteer:view_history' volunteer.id %}" class="btn btn-info btn-sm">{% trans "View" %}</a></td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        {% if has_searched %}
            <div class="alert alert-info">
                <h4>{% trans "Your search return no results!" %}</h4>
            </div>
        {% endif %}
    {% endif %}
{% endblock %}

